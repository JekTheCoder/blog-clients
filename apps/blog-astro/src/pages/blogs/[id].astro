---
export const prerender = false;

import Layout from '@/layouts/Layout.astro';
import EachComment from '@/components/comments/smart/EachComment.svelte';
import { BlogFrame } from 'blog-frame';
import { getOneBlog } from 'backend/blogs';

const { content, title, comments } = await getOneBlog(Astro.params.id!).then(
	response => response.data,
);
---

<Layout title={`${title} - MeBlog`}>
	<main class="container px-4">
		<div>
			<a class="link" href="/blogs">Back</a>
		</div>

		<BlogFrame {content} />

		<hr class="my-4" />

		<section>
			<h3>Comments</h3>

			<ul>
				{
					comments.map(comment => (
						<li>
							<EachComment {comment} user={null} />
						</li>
					))
				}
			</ul>
		</section>
	</main>
</Layout>

<style>
	main {
		max-width: 1000px;
		margin: 0 auto;
	}
</style>
